/*
******************************************************************************
******************************************************************************
                              ANGULAR IMPORT
******************************************************************************
******************************************************************************
*/
import { Component, OnInit }       from '@angular/core';
import { Router }            		   from '@angular/router';
/*
******************************************************************************
******************************************************************************
                              ANGULAR SERVICES
******************************************************************************
******************************************************************************
*/
import { AuthService }           from './../../services/auth.service'
import { ConsultAuthService }    from './../../services/consult-auth.service'

@Component({
  selector: 'app-logout',
  templateUrl: './logout.component.html',
  styleUrls: ['./logout.component.scss']
})
export class LogoutComponent implements OnInit
{
  /*
  ******************************************************************************
  ******************************************************************************
                            LIST OF VARIABLES
  ******************************************************************************
  ******************************************************************************
  */

  /*
  ******************************************************************************
  ******************************************************************************
                               CLASS CONSTRUCTOR
  ******************************************************************************
  ******************************************************************************
  */
  constructor(private _serviceConsultAuth:ConsultAuthService,
  			  private Auth:AuthService,
  			  private route:Router)
  {

  };

  /*
  ******************************************************************************
  ******************************************************************************
                              ANGULAR NGONINIT
  ******************************************************************************
  ******************************************************************************
  */
  ngOnInit()
  {
   //We'll close the user session
    this._serviceConsultAuth.logout().subscribe(data =>
    {
      if(data.status)
      {
        this.route.navigate(['login']);
        this.Auth.setLoggedIn(false);
        localStorage.removeItem('loggedIn');
      }
      else
      {
        window.alert('Some problem: ' + data.status);
      }
    })
  };


}
